<script src="https://cdn.tailwindcss.com"></script>
<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<section class="w-full bg-violet-600 py-20 flex flex-col items-center justify-center relative overflow-x-hidden">
  <!-- Quote -->
  <div id="carouselQuote" class="w-full flex justify-center items-center mb-20 min-h-[65px] relative">
    <!-- quote text via JS -->
  </div>

  <!-- Avatars + names -->
  <div id="carouselAvatars" class="flex justify-center gap-16 items-end"></div>

  <style>
    .review-fadein {
      animation: fadein .6s both cubic-bezier(.44, 1.45, .59, 1);
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: none; }
    }

    .review-avatar {
      opacity: .45;
      transform: scale(.93);
      transition: all .45s cubic-bezier(.44, 1.45, .59, 1);
      filter: grayscale(1);
    }
    .review-avatar.active {
      opacity: 1;
      transform: scale(1.13);
      filter: grayscale(0);
      z-index: 2;
    }

    .review-name,
    .review-role { transition: all .3s; }

    /* Colors moved to Tailwind classes in markup to avoid hex */
    .review-name.active { font-weight: 800; }
    .review-role.active { font-weight: 600; }

    .speech-bubble {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: -20px;
      z-index: 1;
      width: 180px;
      pointer-events: none;
    }
  </style>

  <script>
    const reviews = [
      {
        quote: `We work systematically to integrated corporate responsibility in our corein business and we make our expertise available for the benefit.`,
        name: "Ronald S",
        role: "CEO, Franklin Agency",
        img: "https://randomuser.me/api/portraits/men/32.jpg"
      },
      {
        quote: `The best partnership to solve our digital marketing needs at scale!`,
        name: "Rudy S",
        role: "CEO, Franklin Agency",
        img: "https://randomuser.me/api/portraits/women/56.jpg"
      },
      {
        quote: `Seamless from start to finish. Rapid teamwork and stellar financial clarity.`,
        name: "David J",
        role: "Finance Head",
        img: "https://randomuser.me/api/portraits/men/41.jpg"
      }
    ];
    let cur = 0;

    function renderReview() {
      // Quote at top, white, center
      carouselQuote.innerHTML = `
        <div class="w-full text-center max-w-5xl mx-auto px-3 review-fadein relative">
          <span class="align-super text-3xl text-white/50 font-sans">&#8220;</span>
          <span class="inline-block text-white text-lg md:text-2xl font-bold leading-relaxed">
            ${reviews[cur].quote}
          </span>
          <span class="align-sub text-3xl text-white/50 font-sans">&#8221;</span>
        </div>
      `;

      // Avatars row
      let html = '';
      reviews.forEach((r, i) => {
        const isActive = i === cur;
        html += `
          <div onclick="selectReview(${i})"
            class="flex flex-col items-center z-10 cursor-pointer select-none transition-all duration-500 relative review-avatar ${isActive ? 'active' : ''}">
              <img src="${r.img}" alt="${r.name}"
                   class="rounded-full w-20 h-20 object-cover border-4 border-white shadow-md ${isActive ? 'ring-4 ring-white drop-shadow-lg' : ''}" />
              <span class="mt-3 review-name ${isActive ? 'active text-white font-extrabold' : 'text-indigo-200'}">${r.name}</span>
              <span class="review-role text-sm ${isActive ? 'active text-amber-200 font-semibold' : 'text-indigo-200'}">${r.role}</span>
              ${isActive ? `
                <i class="fa-solid fa-caret-up speech-bubble text-white opacity-90 text-lg" aria-hidden="true"></i>
              ` : ''}
          </div>
        `;
      });
      carouselAvatars.innerHTML = html;
    }

    function selectReview(i) {
      cur = i;
      renderReview();
      resetInterval();
    }

    let interval;
    function nextReview() {
      cur = (cur + 1) % reviews.length;
      renderReview();
    }
    function resetInterval() {
      clearInterval(interval);
      interval = setInterval(nextReview, 4200);
    }

    renderReview();
    resetInterval();
    window.selectReview = selectReview;
  </script>
</section>
